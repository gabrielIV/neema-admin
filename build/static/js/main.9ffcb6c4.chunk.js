(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{23:function(e,t,a){e.exports=a.p+"static/media/amana-logo.423332e2.png"},27:function(e,t,a){e.exports=a(38)},32:function(e,t,a){},33:function(e,t,a){},38:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),c=a(22),o=a.n(c),s=(a(32),a(33),a(6)),r=a(7),i=a(9),m=a(8),u=a(10),d=a(11),f=a(12),h=a(26),p=a(18),b=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,l=new Array(n),c=0;c<n;c++)l[c]=arguments[c];return(a=Object(i.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(l)))).state={titles:[],data:[],limit:10,offset:0,count:1,currentPagination:0,custom:!1,customText:""},a.fetchTable=function(){if(a.state.custom)return a.fetchTableCustom(),!1;a.fetchTableCount(),a.setState({tableLoading:!0}),console.log("".concat(window.server,"/fetchData.php?t=").concat(a.props.table,"&l=").concat(a.state.limit,"&o=").concat(a.state.offset)),fetch("".concat(window.server,"/fetchData.php?t=").concat(a.props.table,"&l=").concat(a.state.limit,"&o=").concat(a.state.offset)).then(function(e){return e.json()}).then(function(e){a.setState({tableLoading:!1}),e=e.data,console.log(e),a.props.filter&&(e=e.map(function(e){return a.props.filter.map(function(t){delete e[t]}),e}));var t=Object.keys(e[0]);a.setState({data:e,titles:Object(p.a)(t)})}).catch(function(e){a.setState({tableLoading:!1}),console.log(e)})},a.fetchTableCustom=function(){a.fetchTableCount(),a.setState({tableLoading:!0}),console.log("".concat(window.server,"/fetchData.php?t=").concat(a.props.table,"&l=").concat(a.state.limit,"&o=").concat(a.state.offset));var e=new FormData;e.append("t",a.props.table),e.append("l",a.state.limit),e.append("o",a.state.offset),e.append("custom",a.state.customText),fetch("".concat(window.server,"/fetchCustomData.php?"),{method:"POST",body:e}).then(function(e){return e.json()}).then(function(e){a.setState({tableLoading:!1}),console.log(e),e=e.data,a.props.filter&&(e=e.map(function(e){return a.props.filter.map(function(t){delete e[t]}),e}));var t=Object.keys(e[0]);a.setState({data:e,titles:Object(p.a)(t)})}).catch(function(e){a.setState({tableLoading:!1}),console.log(e)})},a.fetchTableCount=function(){console.log("".concat(window.server,"/tablecount.php?t=").concat(a.props.table)),fetch("".concat(window.server,"/tablecount.php?t=").concat(a.props.table)).then(function(e){return e.json()}).then(function(e){a.setState({count:e.data.count})}).catch(function(e){console.log(e)})},a}return Object(u.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"d-flex flex-row justify-content-between align-items-center buttons-tab"},l.a.createElement("button",{className:"btn btn-sm btn-outline-dark mr-2",onClick:function(){e.setState({custom:!1,currentPagination:0,customText:""}),setTimeout(function(){e.fetchTable()},0)}},"All users"),l.a.createElement("button",{className:"btn btn-sm btn-outline-dark mr-2",onClick:function(){e.setState({custom:!0,currentPagination:0,customText:" (income - (needs + wants))<10000 "}),setTimeout(function(){e.fetchTableCustom()},0)}},"savings < 10,000"),l.a.createElement("button",{className:"btn btn-sm btn-outline-dark mr-2",onClick:function(){e.setState({custom:!0,currentPagination:0,customText:" (income - (needs + wants))>10000 "}),setTimeout(function(){e.fetchTableCustom()},0)}},"savings > 10,000"),l.a.createElement("button",{className:"btn btn-sm btn-outline-dark mr-2",onClick:function(){e.setState({custom:!0,currentPagination:0,customText:" id>1 "}),setTimeout(function(){e.fetchTableCustom()},0)}},"Leads"),l.a.createElement("button",{className:"btn btn-sm btn-outline-dark mr-2",onClick:function(){e.setState({custom:!0,currentPagination:0,customText:" phone='undefined' or phone = '' "}),setTimeout(function(){e.fetchTableCustom()},0)}},"no phone")),l.a.createElement("div",{className:"d-flex flex-fill flex-column "+(this.state.tableLoading?"table-loading":"")},l.a.createElement("div",{className:"d-flex flex-row justify-content-between align-items-center"},l.a.createElement("div",{className:"d-flex flex-row align-items-center"},l.a.createElement("span",{className:"mr-2"},"Show "),l.a.createElement("select",{className:"form-control form-control-sm",onChange:function(t){e.setState({limit:parseInt(t.target.value)}),console.log(e.state.limit),setTimeout(function(){e.fetchTable()},100)}},l.a.createElement("option",{value:10},"10"),l.a.createElement("option",{value:25},"25"),l.a.createElement("option",{value:50},"50"),l.a.createElement("option",{value:100},"100")),l.a.createElement("span",{className:"ml-2"}," entries "))),l.a.createElement("div",{className:"d-flex flex-fill tb-cover"},l.a.createElement("table",{className:"table table-striped text-dark table-borderless"},l.a.createElement("thead",null,l.a.createElement("tr",null,this.state.titles.map(function(e,t){return l.a.createElement("th",{key:t,className:"text-capitalize"},e)}))),l.a.createElement("tbody",null,this.state.data.map(function(e,t){return l.a.createElement("tr",{key:t},Object.keys(e).map(function(t,a){var n=null==e[t]||""==e[t]?" - ":e[t];return l.a.createElement("td",{key:a,className:"table-data"},n)}))})))),l.a.createElement("div",{className:"d-flex flex-row justify-content-between align-items-center"},l.a.createElement("div",{className:"d-flex flex-row align-items-center"},l.a.createElement("span",{className:"mr-2"},"Showing ",this.state.offset," to ",this.state.offset+this.state.limit," of"," ",this.state.count," entries"," ")),l.a.createElement("div",null,l.a.createElement("nav",{"aria-label":"Page navigation example"},l.a.createElement("ul",{className:"pagination"},l.a.createElement("li",{className:"page-item"},l.a.createElement("button",{className:"page-link",onClick:function(){e.setState({offset:0,currentPagination:0}),setTimeout(function(){e.fetchTable()},100)}},"\xab")),l.a.createElement("li",{className:"page-item",onClick:function(){e.state.currentPagination-1>=0&&e.setState({offset:(e.state.currentPagination-1)*e.state.offset,currentPagination:e.state.currentPagination-1}),setTimeout(function(){e.fetchTable()},100)}},l.a.createElement("button",{className:"page-link"},"<")),this.generatePagination(this.state.currentPagination),l.a.createElement("li",{className:"page-item"},l.a.createElement("button",{className:"page-link",onClick:function(){e.state.currentPagination+1<parseInt(e.state.count/e.state.limit)&&(e.setState({offset:(e.state.currentPagination+1)*e.state.limit,currentPagination:e.state.currentPagination+1}),setTimeout(function(){e.fetchTable()},100))}},">")),l.a.createElement("li",{className:"page-item"},l.a.createElement("button",{className:"page-link",onClick:function(){e.setState({offset:e.state.count-e.state.limit,currentPagination:parseInt(e.state.count/e.state.limit)}),setTimeout(function(){e.fetchTable()},100)}},"\xbb"))))))))}},{key:"componentDidMount",value:function(){this.fetchTable()}},{key:"generatePagination",value:function(){var e=this;console.log("currentPagination :",this.state.currentPagination);var t=parseInt(this.state.count),a=this.state.limit,n=this.state.offset,c=[],o=parseInt(t/a*(n/t));(o-=2)<0&&(o=0);for(var s=o,r=function(){var t=o;c.push(l.a.createElement("li",{key:t,className:"page-item "+(e.state.currentPagination==o?"active":"")},l.a.createElement("button",{className:"page-link",onClick:function(){console.log("next position :: ",t);var n=t*a;e.setState({offset:n,currentPagination:t}),setTimeout(function(){e.fetchTable()},100)}},t+1))),o++};o<s+5;)r();return c}}]),t}(n.Component),g=a(39),v=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,l=new Array(n),c=0;c<n;c++)l[c]=arguments[c];return(a=Object(i.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(l)))).state={visible:a.props.visible},a}return Object(u.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this;return l.a.createElement("div",{class:this.state.visible?"modal fade d-block show":"modal fade",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalCenterTitle","aria-hidden":"true"},l.a.createElement("div",{class:"modal-dialog modal-dialog-centered",role:"document"},l.a.createElement("div",{class:"modal-content"},l.a.createElement(g.a,{className:"icon position-absolute modal-close-icon m-2",onClick:function(){e.setState({visible:!1})}}),l.a.createElement("div",{class:"modal-body"},this.props.children))))}},{key:"componentWillReceiveProps",value:function(e){"undefined"!==typeof e.visible&&this.setState({visible:e.visible})}}]),t}(n.Component),E=a(40),w=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,l=new Array(n),c=0;c<n;c++)l[c]=arguments[c];return(a=Object(i.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(l)))).state={custom:!0,dailyGrowth:0,averageGrowth:0,count:0,downCSV:!1},a}return Object(u.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"p-3"},l.a.createElement("div",{className:"d-flex flex-row justify-content-between align-items-center"},l.a.createElement("h2",{className:"page-title mb-5"},"Dashboard")),l.a.createElement("div",null,l.a.createElement("div",{className:"row mb-5"},l.a.createElement("div",{className:"col-md-3"},l.a.createElement("div",{className:"card icon tex-"},l.a.createElement("h1",{className:"text-center p-2"},parseInt(100*this.state.dailyGrowth)/100,"%"),l.a.createElement("div",{className:"card-header"},"Daily Growth rate"))),l.a.createElement("div",{className:"col-md-3"},l.a.createElement("div",{className:"card icon tex-"},l.a.createElement("h1",{className:"text-center p-2"},parseInt(100*this.state.averageGrowth)/100,"%"),l.a.createElement("div",{className:"card-header"},"Average Growth rate"))),l.a.createElement("div",{className:"col-md-3"},l.a.createElement("div",{className:"card icon"},l.a.createElement("h1",{className:"text-center p-2"},this.state.count.toLocaleString()),l.a.createElement("div",{className:"card-header"},"Total number of users"))),l.a.createElement("div",{className:"col-md-3 "},l.a.createElement("div",{onClick:function(){e.setState({downCSV:!0})},className:"card icon bg-primary icon text-white text-center d-flex flex-column align-items-center"},l.a.createElement(E.a,{size:50,className:"my-3"}),l.a.createElement("div",{className:"card-header bg-lsd w-100"},"Download CSV")))),l.a.createElement("div",null,l.a.createElement(b,{table:"users"})))),l.a.createElement(v,{visible:this.state.downCSV},l.a.createElement("div",{className:"card-header"},"Download CSV"),l.a.createElement("ul",{class:"list-group"},l.a.createElement("li",{class:"list-group-item"},l.a.createElement("a",{target:"_blank",download:!0,href:window.server+"/fetchCSV.php?custom=id>0"},"all users")),l.a.createElement("li",{class:"list-group-item"},l.a.createElement("a",{target:"_blank",download:!0,href:window.server+"/fetchCSV.php?custom=savings<10000"},"Savings less than 10,000")),l.a.createElement("li",{class:"list-group-item"},l.a.createElement("a",{target:"_blank",download:!0,href:window.server+"/fetchCSV.php?custom=savings>10000"},"Savings more than 10,000")),l.a.createElement("li",{class:"list-group-item"},l.a.createElement("a",{target:"_blank",href:window.server+"/fetchCSV.php?custom= phone eq2 'undefined' or phone eq2 '' "},"Users without a phone number")),l.a.createElement("li",{class:"list-group-item"},l.a.createElement("a",{target:"_blank",href:window.server+"/leadsCSV.php"},"Leads")))))}},{key:"componentDidMount",value:function(){var e=this;fetch("".concat(window.server,"/growthRate.php?t=").concat(this.props.table)).then(function(e){return e.json()}).then(function(t){e.setState(Object(h.a)({},t))}).catch(function(e){console.log(e)})}}]),t}(n.Component),N=a(41),x=a(42),k=a(43),y=a(44),S=a(45),C=a(46),j=a(23),T=a.n(j),O=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,l=new Array(n),c=0;c<n;c++)l[c]=arguments[c];return(a=Object(i.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(l)))).state={custom:!0},a.login=function(){var e=a.state.email,t=a.state.password;if(console.log(a.state),""===e||""===t)return alert("Please fill in all the required values"),!1;a.setState({disabled:!0}),fetch(window.server+"/login.php",{method:"POST",headers:{"Access-Control-Allow-Origin":"*","Content-Type":"application/x-www-form-urlencoded"},body:"email=".concat(e,"&password=").concat(t)}).then(function(e){return e.json()}).then(function(e){if(console.log(e),console.log(e),a.setState({disabled:!1}),"200"===e.code)return localStorage.id=e.data.id,localStorage.user=JSON.stringify(e.data),window.user=e.data,a.props.history.push("/"),!1;alert("Wrong Email/password. please try again"),a.setState({password:""})})},a}return Object(u.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this;return l.a.createElement("div",{className:"d-flex flex-fill flex-column main-cover justify-content-center"},l.a.createElement("div",{className:"container"},l.a.createElement("div",{className:"row justify-content-center"},l.a.createElement("div",{className:"col-xl-10 col-lg-12 col-md-9"},l.a.createElement("div",{className:"card o-hidden border-0 shadow-lg my-5"},l.a.createElement("div",{className:"card-body p-0"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-lg-6 d-lg-flex d-none  default-bg d-flex align-items-center justify-content-center flex-row"},l.a.createElement("img",{src:T.a,alt:"",className:"muted d-none d-md-flex"})),l.a.createElement("div",{className:"col-lg-6"},l.a.createElement("div",{className:"p-5"},l.a.createElement("div",{className:"text-center"},l.a.createElement("h1",{className:"h4 text-gray-900 mb-4 font-weight-bold"},"Amana Capital")),l.a.createElement("div",{className:"text-center mb-4"},l.a.createElement("small",{className:"text-muted"},"Admin login")),l.a.createElement("div",{className:"form-group"},l.a.createElement("input",{type:"email",className:"form-control form-control-user",placeholder:"Enter Email Address...",onChange:function(t){e.setState({email:t.target.value})}})),l.a.createElement("div",{className:"form-group"},l.a.createElement("input",{type:"password",className:"form-control form-control-user",placeholder:"Password",onChange:function(t){e.setState({password:t.target.value})}})),l.a.createElement("div",{className:"form-group"},l.a.createElement("div",{className:"custom-control custom-checkbox small"},l.a.createElement("input",{type:"checkbox",className:"custom-control-input",checked:!0}),l.a.createElement("label",{className:"custom-control-label",for:"customCheck"},"Remember Me"))),l.a.createElement("button",{className:"btn btn-danger btn-user btn-block default-bg",onClick:this.login},"Login"),l.a.createElement("hr",null))))))))))}}]),t}(n.Component);window.server="/admin/php";var P=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,l=new Array(n),c=0;c<n;c++)l[c]=arguments[c];return(a=Object(i.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(l)))).state={},a}return Object(u.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this;return void 0===localStorage.id&&this.props.history.push("/login"),l.a.createElement("div",{id:"wrapper"},l.a.createElement("ul",{className:"navbar-nav bg-gradient-dark default-bg sidebar sidebar-dark accordion position-relative",id:"accordionSidebar"},l.a.createElement(f.b,{className:"sidebar-brand d-flex align-items-center justify-content-center",to:"/"},l.a.createElement("div",{className:"sidebar-brand-icon rotate-n-15"},l.a.createElement("i",{className:"fas fa-laugh-wink"})),l.a.createElement("div",{className:"sidebar-brand-text mx-3"},"Admin")),l.a.createElement("div",{className:"sidebar-heading"},"pages"),l.a.createElement("li",{className:"nav-item"},l.a.createElement(f.b,{to:"/",className:"nav-link d-flex flex-row align-items-center"},l.a.createElement(N.a,{color:"white"}),l.a.createElement("span",{className:"text-white ml-2"},"Dashboard"))),l.a.createElement("li",{className:"nav-item muted"},l.a.createElement(f.b,{to:"/",className:"nav-link d-flex flex-row align-items-center"},l.a.createElement(x.a,{color:"white"}),l.a.createElement("span",{className:"text-white ml-2"},"Users"))),l.a.createElement("li",{className:"nav-item muted"},l.a.createElement(f.b,{to:"/",className:"nav-link d-flex flex-row align-items-center"},l.a.createElement(k.a,{color:"white"}),l.a.createElement("span",{className:"text-white ml-2"},"Progress reports"))),l.a.createElement("li",{className:"nav-item muted"},l.a.createElement(f.b,{to:"/",className:"nav-link d-flex flex-row align-items-center"},l.a.createElement(y.a,{color:"white"}),l.a.createElement("span",{className:"text-white ml-2"},"User behaviour"))),l.a.createElement("li",{className:"nav-item"},l.a.createElement("button",{className:"nav-link d-flex flex-row align-items-center bg-transparent btn",onClick:function(){window.confirm("are you sure you want to logout?")&&(localStorage.clear(),e.props.history.push("/login"))}},l.a.createElement(S.a,{color:"white"}),l.a.createElement("span",{className:"text-white ml-2"},"Logout"))),l.a.createElement("div",{className:"text-center d-none d-md-inline sidebarToggle w-100"},l.a.createElement("button",{className:"rounded-circle border-0",id:"sidebarToggle"},l.a.createElement(C.a,{color:"white"})))),l.a.createElement("div",{id:"content-wrapper",className:"d-flex flex-column"},l.a.createElement("div",{className:"bg-white d-flex flex-fill flex-column"},l.a.createElement(d.a,{path:"/",exact:!0,component:w}))))}}]),t}(n.Component),A=function(){return l.a.createElement(d.c,null,l.a.createElement(d.a,{path:"/login",component:O}),l.a.createElement(d.a,{path:"/",component:P}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(l.a.createElement(f.a,{basename:"/admin"},l.a.createElement(A,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[27,1,2]]]);
//# sourceMappingURL=main.9ffcb6c4.chunk.js.map